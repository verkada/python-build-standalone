# Describes the targets that the CI system will build and test on.

darwin:
  aarch64-apple-darwin:
    arch: aarch64
    python_versions:
      - "3.10"
      - "3.11"
      - "3.12"
      - "3.13"
      - "3.14"
    build_options:
      - debug
      - pgo+lto
    build_options_conditional:
      - options:
          - freethreaded+debug
          - freethreaded+pgo+lto
        minimum-python-version: "3.13"

  x86_64-apple-darwin:
    arch: x86_64
    python_versions:
      - "3.10"
      - "3.11"
      - "3.12"
      - "3.13"
      - "3.14"
    build_options:
      - debug
      - pgo+lto
    build_options_conditional:
      - options:
          - freethreaded+debug
          - freethreaded+pgo+lto
        minimum-python-version: "3.13"

linux:
  aarch64-unknown-linux-gnu:
    arch: aarch64
    libc: gnu
    python_versions:
      - "3.10"
      - "3.11"
      - "3.12"
      - "3.13"
      - "3.14"
    build_options:
      - debug
      - noopt
      - lto
    build_options_conditional:
      - options:
          - freethreaded+debug
          - freethreaded+noopt
          - freethreaded+lto
        minimum-python-version: "3.13"

  x86_64-unknown-linux-gnu:
    arch: x86_64
    libc: gnu
    python_versions:
      - "3.10"
      - "3.11"
      - "3.12"
      - "3.13"
      - "3.14"
    build_options:
      - debug
      - pgo+lto
    build_options_conditional:
      - options:
          - freethreaded+debug
          - freethreaded+pgo+lto
        minimum-python-version: "3.13"
    run: true
